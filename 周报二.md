# 周报二

系统性学习web信息收集模块，尝试sqli-lab，dvwa等，局域网实验，学习简单病毒制作，了解一些病毒和工具

## 局域网实验

设备：winxp一台，win2003一台

1.两台虚拟机均设置特定虚拟网络为VMnet1

![image-20260131131816449](D:\PROJECT\MDProject\report\周报二.assets\image-20260131131816449.png)

2.设置两台设备处于同一网段。右击“网络邻居”->属性->右击“本地连接”->属性->在“此连接使用下列项目中”双击“Internet协议”->设置IP

![image-20260131132207484](D:\PROJECT\MDProject\report\周报二.assets\image-20260131132207484.png)

![image-20260131132548704](D:\PROJECT\MDProject\report\周报二.assets\image-20260131132548704.png)

3.测试网络连通性

![image-20260131133135324](D:\PROJECT\MDProject\report\周报二.assets\image-20260131133135324.png)

![image-20260131135619031](D:\PROJECT\MDProject\report\周报二.assets\image-20260131135619031.png)

**注意事项**

设备均需要关闭防火墙！

## NTFS权限

https://blog.csdn.net/weixin_58376680/article/details/134659012

**概述**

设置NTFS权限实现不同用户访问不同权限，防止资源被篡改，删除。只有分配正确的访问权限后，用户才能访问资源

windows:FAT12 FAT32 NTFS EXFAT

Linux:EXT2 EXT3 EXT4 XFS	

在外部存储设备上组织文件的方法称为**文件系统**，NTFS文件系统有以下特点：

- 提高磁盘读写性能
- 可靠性：加密文件系统EFS，访问控制列表ACL
- 磁盘利用率，压缩，磁盘配额
- 支持单个文件大于4G

## 信息收集

https://blog.csdn.net/weixin_57543652/article/details/149781248

DNS信息关注域名注册商，管理员联系方式，电话与邮箱，子域名等信息

- whois查询![image-20260131161221525](D:\PROJECT\MDProject\report\周报二.assets\image-20260131161221525.png)

- 站长之家 反查https://whois.chinaz.com/![image-20260131161608165](D:\PROJECT\MDProject\report\周报二.assets\image-20260131161608165.png)![image-20260131161637996](D:\PROJECT\MDProject\report\周报二.assets\image-20260131161637996.png)

- 子域名查询：netcraft Layer 证书查询 fierce![image-20260131162023945](D:\PROJECT\MDProject\report\周报二.assets\image-20260131162023945.png)

- ![image-20260131164957605](D:\PROJECT\MDProject\report\周报二.assets\image-20260131164957605.png)

- 域传送漏洞：备用服务器使用自助服务器数据刷新自己的域数据库，许多DNS服务器被配置为只要有client发出请求就会向对方发送详细信息，暴露子域名信息即ip，使用dig工具检测该漏洞dig axfr @ip dns

- shodan Zoomeye Google

  > mstsc -v:ip远程连接电脑

## 扫描

- whatweb扫描：CMS类型，中间件，web框架模块，网站服务器，脚本类型，JavaScript库，IP，Cookie等![image-20260131171027031](D:\PROJECT\MDProject\report\周报二.assets\image-20260131171027031.png)可以从外部文件导入目标数据进行批量检测
- nmap：主机发现（同一网段），端口发现或枚举，检测端口的软件和版本，检测操作系统，硬件地址以及软件版本，检测脆弱性漏洞  图形界面Zenmap![image-20260131172403641](D:\PROJECT\MDProject\report\周报二.assets\image-20260131172403641.png)
- 科来网络分析系统
- AWVS OpenVAS 御剑

## FOFA

```
网址：https://fofa.info
```

一个网络空间测绘工具。可以寻找全球具有IP地址的网络设备，批量寻找网站

## Zoomeye

https://www.zoomeye.org/

一个强大的网络空间搜索引擎，专注于目标和漏洞映射。它通过全端口扫描和持续探测，构建互联网安全景观图，支持资产发现、风险分析、应急响应和网络安全保证。

搜索指定组件：app：中间件 var：版本号

搜索端口：port：端口号

指定操作系统：OS：操作系统

指定服务：service：服务

指定CIDR网段：CIDR：网段

指定域名：site：域名

指定主机名：hostname：主机名

指定设备名：device：设备名

关键词：keyword：关键词

## DVWA

靶场默认账号admin，密码password

### 暴力破解

没有任何防御，有sql注入风险

![image-20260201154237552](D:\PROJECT\MDProject\report\周报二.assets\image-20260201154237552.png)

可以暴力破解。抓包发送到Intruder模块，选择Cluster bomb 模式（推荐使用）。设置username和password为payload，并进及进行配置

![image-20260201145527848](D:\PROJECT\MDProject\report\周报二.assets\image-20260201145527848.png)

根据响应长度得到用户名和密码

![image-20260201150447345](D:\PROJECT\MDProject\report\周报二.assets\image-20260201150447345.png)

### 命令注入

对一些函数的参数没有做过滤或过滤不严格导致命令注入，因此可以执行系统指令cmd或bash。常见命令连接符：&&   |    &    ||   ;

未对数据做任何过滤，可以直接ping

127.0.0.1 | whoami (ipconfig等)

![image-20260201155454544](D:\PROJECT\MDProject\report\周报二.assets\image-20260201155454544.png)

### CSRF

跨站请求伪造Cross-Site request forgery,强制终端用户在当前对其进行身份验证后的web应用程序中执行非本意操作，通常与XSS联合利用。与XSS的最大区别在于CSRF没有盗取cookie而直接利用：

- 用户登录信任网站A（存在CSRF利用）->验证通过并在用户端产生cookie
- 在此期间（没有登出A/cookie没有过期）访问网站B（利用CSRF提交请求）->B要求访问A并发出请求
- 用户端携带B的请求以及cookie访问A（利用cookie）,实现CSRF利用。非法操作不是由黑客引起，而是用户本身操作

代码只检测$pass_new == $pass_conf ，没有其他防御机制。直接在网站修改，会在地址栏中显示，也可以直接在url中修改，GET型请求。首先更改密码为123

![image-20260201182254020](D:\PROJECT\MDProject\report\周报二.assets\image-20260201182254020.png)

紧接着访问链接，直接在url中修改密码为666，可以使用工具生成短链接，更具有迷惑性。受害者点击链接，密码就修改。这两个网站使用的cookie相同

![image-20260201182425424](D:\PROJECT\MDProject\report\周报二.assets\image-20260201182425424.png)

![image-20260201183035489](D:\PROJECT\MDProject\report\周报二.assets\image-20260201183035489.png)

再使用123登录失败，666登录成功。但该利用具有局限性，需要攻击者使用与受害方相同的浏览器，否则不同浏览器cookie不同

![image-20260201182718162](D:\PROJECT\MDProject\report\周报二.assets\image-20260201182718162.png)